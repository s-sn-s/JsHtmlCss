<!DOCTYPE html>
<html>
<head>
  <title>
    Functions
    </title>
</head>
<body>
  <h1>Rock Paper Scissors with JS functions</h1>
  <p>Select one :</p>
  <button class="Rock" onclick="playGame('Rock')">
    Rock
  </button>
  <button class="Paper" onclick="playGame('Paper')">
    Paper
  </button>
  <button class="Scissor" onclick="playGame('Scissor')">
    Scissor
  </button>
  <br/>
  <button class="Reset" onclick="
    points.Won=0;points.Lost=0;points.Tie=0;
    localStorage.removeItem('results');
    alert('Your points were reset.');
  ">
    Reset points
  </button>  
  <script>
    let points = JSON.parse(localStorage.getItem('results'));
    // || {
    //     Won: 0,
    //     Lost: 0,
    //     Tie: 0
    //   };

    if(!points){
      points=
      {
        Won: 0,
        Lost: 0,
        Tie: 0
      };
    }

    console.log(points.Won);
    console.log(points.Lost);
    console.log(points.Tie);

    function playGame(playerMove){
      const cpuMove = pickCPUmove();
      let result = '';
      if(playerMove==='Rock'){
        if(cpuMove==='Rock')result = ' Tie!';
          else if (cpuMove==='Paper')result = ' Lost!';
          else if (cpuMove==='Scissor')result = ' Won!';
      }
      else if(playerMove==='Paper'){
        if(cpuMove==='Rock')result = ' Won!';
          else if (cpuMove==='Paper')result = ' Tie!';
          else if (cpuMove==='Scissor')result = ' Lost!';
      }
      else if(playerMove==='Scissor'){
        if(cpuMove==='Rock')result = ' Lost!';
          else if (cpuMove==='Paper')result = ' Won!';
          else if (cpuMove==='Scissor')result = ' Tie!';
      }

      if(result===' Won!')points.Won+=1;
      else if(result===' Lost!')points.Lost+=1;
      else if(result===' Tie!') points.Tie+=1;

      // let resultStr = {
      // Won : points.Won,
      // Lost : points.Lost,
      // Tie : points.Tie
      // }
      alert(`Your move was ${playerMove} and ${cpuMove} \n You ${result} 
      Won : ${points.Won}
      Lost : ${points.Lost}
      Tie : ${points.Tie}
      `);
      localStorage.setItem('results',JSON.stringify(points));
    }

    function pickCPUmove(){
      let cpuMove = '';
      const randomCPUselection = Math.random();
      if(randomCPUselection<0.34)
        cpuMove = 'Rock';
      else if(randomCPUselection>0.33
      && randomCPUselection<0.67
      )
        cpuMove = 'Paper';
      else if(randomCPUselection>0.66)
        cpuMove = 'Scissor';
      console.log(cpuMove);
      return cpuMove
    }
  
  </script>
</body>
</html>